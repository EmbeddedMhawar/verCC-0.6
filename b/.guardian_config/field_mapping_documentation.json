{
  "overview": {
    "title": "ESP32 to Guardian Field Mapping Documentation",
    "version": "1.0",
    "created": "2025-09-24T04:55:58.762573",
    "description": "Comprehensive mapping between ESP32 SCADA data and Guardian Verra-compliant schemas"
  },
  "policy_types": {
    "VM0042": {
      "description": "Verra Methodology VM0042 for Grid-Connected Renewable Energy Generation",
      "schema_version": "v4.2",
      "field_mappings": [
        {
          "esp32_field": "total_energy_kwh",
          "guardian_field": "energyProduction.totalEnergyKWh",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_power_w",
          "guardian_field": "energyProduction.averagePowerW",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "max_power_w",
          "guardian_field": "energyProduction.peakPowerW",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "capacity_factor",
          "guardian_field": "performance.capacityFactor",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_efficiency",
          "guardian_field": "performance.systemEfficiency",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_irradiance_w_m2",
          "guardian_field": "environmental.solarIrradiance",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_temperature_c",
          "guardian_field": "environmental.ambientTemperature",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "verification_hash",
          "guardian_field": "dataIntegrity.verificationHash",
          "data_type": "string",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "data_integrity_score",
          "guardian_field": "dataIntegrity.qualityScore",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        }
      ],
      "validation_rules": {
        "required_fields": [
          "energyProduction.totalEnergyKWh",
          "energyProduction.averagePowerW",
          "dataIntegrity.verificationHash",
          "dataIntegrity.qualityScore"
        ],
        "field_types": {
          "energyProduction.totalEnergyKWh": "number",
          "energyProduction.averagePowerW": "number",
          "performance.systemEfficiency": "number",
          "dataIntegrity.verificationHash": "string"
        },
        "value_ranges": {
          "energyProduction.totalEnergyKWh": {
            "min": 0,
            "max": 10000
          },
          "energyProduction.averagePowerW": {
            "min": 0,
            "max": 1000000
          },
          "performance.systemEfficiency": {
            "min": 0,
            "max": 1
          },
          "dataIntegrity.qualityScore": {
            "min": 0,
            "max": 1
          }
        }
      },
      "example_transformation": {
        "input": {
          "device_id": "ESP32_001",
          "total_energy_kwh": 125.5,
          "avg_power_w": 5229.2,
          "avg_efficiency": 0.96,
          "verification_hash": "abc123..."
        },
        "output": {
          "energyProduction": {
            "totalEnergyKWh": 125.5,
            "averagePowerW": 5229.2
          },
          "performance": {
            "systemEfficiency": 0.96
          },
          "dataIntegrity": {
            "verificationHash": "abc123..."
          }
        }
      }
    },
    "ARR": {
      "description": "Afforestation, Reforestation and Revegetation methodology",
      "schema_version": "v4.2",
      "field_mappings": [
        {
          "esp32_field": "total_energy_kwh",
          "guardian_field": "energyProduction.totalEnergyKWh",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_power_w",
          "guardian_field": "energyProduction.averagePowerW",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "max_power_w",
          "guardian_field": "energyProduction.peakPowerW",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "capacity_factor",
          "guardian_field": "performance.capacityFactor",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_efficiency",
          "guardian_field": "performance.systemEfficiency",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_irradiance_w_m2",
          "guardian_field": "environmental.solarIrradiance",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_temperature_c",
          "guardian_field": "environmental.ambientTemperature",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "verification_hash",
          "guardian_field": "dataIntegrity.verificationHash",
          "data_type": "string",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "data_integrity_score",
          "guardian_field": "dataIntegrity.qualityScore",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        }
      ],
      "validation_rules": {},
      "example_transformation": {
        "input": {
          "device_id": "ESP32_001",
          "total_energy_kwh": 125.5,
          "avg_power_w": 5229.2,
          "avg_efficiency": 0.96,
          "verification_hash": "abc123..."
        },
        "output": {
          "energyProduction": {
            "totalEnergyKWh": 125.5,
            "averagePowerW": 5229.2
          },
          "performance": {
            "systemEfficiency": 0.96
          },
          "dataIntegrity": {
            "verificationHash": "abc123..."
          }
        }
      }
    },
    "CUSTOM_RENEWABLE": {
      "description": "Custom renewable energy methodology",
      "schema_version": "v4.2",
      "field_mappings": [
        {
          "esp32_field": "total_energy_kwh",
          "guardian_field": "energyProduction.totalEnergyKWh",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_power_w",
          "guardian_field": "energyProduction.averagePowerW",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "max_power_w",
          "guardian_field": "energyProduction.peakPowerW",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "capacity_factor",
          "guardian_field": "performance.capacityFactor",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_efficiency",
          "guardian_field": "performance.systemEfficiency",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_irradiance_w_m2",
          "guardian_field": "environmental.solarIrradiance",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_temperature_c",
          "guardian_field": "environmental.ambientTemperature",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "verification_hash",
          "guardian_field": "dataIntegrity.verificationHash",
          "data_type": "string",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "data_integrity_score",
          "guardian_field": "dataIntegrity.qualityScore",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        }
      ],
      "validation_rules": {},
      "example_transformation": {
        "input": {
          "device_id": "ESP32_001",
          "total_energy_kwh": 125.5,
          "avg_power_w": 5229.2,
          "avg_efficiency": 0.96,
          "verification_hash": "abc123..."
        },
        "output": {
          "energyProduction": {
            "totalEnergyKWh": 125.5,
            "averagePowerW": 5229.2
          },
          "performance": {
            "systemEfficiency": 0.96
          },
          "dataIntegrity": {
            "verificationHash": "abc123..."
          }
        }
      }
    },
    "SOLAR_PV": {
      "description": "Solar Photovoltaic energy production methodology",
      "schema_version": "v4.2",
      "field_mappings": [
        {
          "esp32_field": "total_energy_kwh",
          "guardian_field": "solarProduction.energyGenerated",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_power_w",
          "guardian_field": "solarProduction.averageOutput",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_irradiance_w_m2",
          "guardian_field": "solarConditions.irradiance",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_efficiency",
          "guardian_field": "solarPerformance.panelEfficiency",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "capacity_factor",
          "guardian_field": "solarPerformance.capacityUtilization",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        }
      ],
      "validation_rules": {},
      "example_transformation": {
        "input": {
          "device_id": "ESP32_001",
          "total_energy_kwh": 125.5,
          "avg_power_w": 5229.2,
          "avg_efficiency": 0.96,
          "verification_hash": "abc123..."
        },
        "output": {
          "energyProduction": {
            "totalEnergyKWh": 125.5,
            "averagePowerW": 5229.2
          },
          "performance": {
            "systemEfficiency": 0.96
          },
          "dataIntegrity": {
            "verificationHash": "abc123..."
          }
        }
      }
    },
    "WIND": {
      "description": "Wind energy production methodology",
      "schema_version": "v4.2",
      "field_mappings": [
        {
          "esp32_field": "total_energy_kwh",
          "guardian_field": "energyProduction.totalEnergyKWh",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_power_w",
          "guardian_field": "energyProduction.averagePowerW",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "max_power_w",
          "guardian_field": "energyProduction.peakPowerW",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "capacity_factor",
          "guardian_field": "performance.capacityFactor",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_efficiency",
          "guardian_field": "performance.systemEfficiency",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_irradiance_w_m2",
          "guardian_field": "environmental.solarIrradiance",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_temperature_c",
          "guardian_field": "environmental.ambientTemperature",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "verification_hash",
          "guardian_field": "dataIntegrity.verificationHash",
          "data_type": "string",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "data_integrity_score",
          "guardian_field": "dataIntegrity.qualityScore",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        }
      ],
      "validation_rules": {},
      "example_transformation": {
        "input": {
          "device_id": "ESP32_001",
          "total_energy_kwh": 125.5,
          "avg_power_w": 5229.2,
          "avg_efficiency": 0.96,
          "verification_hash": "abc123..."
        },
        "output": {
          "energyProduction": {
            "totalEnergyKWh": 125.5,
            "averagePowerW": 5229.2
          },
          "performance": {
            "systemEfficiency": 0.96
          },
          "dataIntegrity": {
            "verificationHash": "abc123..."
          }
        }
      }
    },
    "GENERIC_RENEWABLE": {
      "description": "Generic renewable energy methodology",
      "schema_version": "v4.2",
      "field_mappings": [
        {
          "esp32_field": "total_energy_kwh",
          "guardian_field": "energyProduction.totalEnergyKWh",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_power_w",
          "guardian_field": "energyProduction.averagePowerW",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "max_power_w",
          "guardian_field": "energyProduction.peakPowerW",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "capacity_factor",
          "guardian_field": "performance.capacityFactor",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_efficiency",
          "guardian_field": "performance.systemEfficiency",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_irradiance_w_m2",
          "guardian_field": "environmental.solarIrradiance",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "avg_temperature_c",
          "guardian_field": "environmental.ambientTemperature",
          "data_type": "number",
          "required": false,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "verification_hash",
          "guardian_field": "dataIntegrity.verificationHash",
          "data_type": "string",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        },
        {
          "esp32_field": "data_integrity_score",
          "guardian_field": "dataIntegrity.qualityScore",
          "data_type": "number",
          "required": true,
          "transformation_func": null,
          "validation_rules": null,
          "unit_conversion": null
        }
      ],
      "validation_rules": {},
      "example_transformation": {
        "input": {
          "device_id": "ESP32_001",
          "total_energy_kwh": 125.5,
          "avg_power_w": 5229.2,
          "avg_efficiency": 0.96,
          "verification_hash": "abc123..."
        },
        "output": {
          "energyProduction": {
            "totalEnergyKWh": 125.5,
            "averagePowerW": 5229.2
          },
          "performance": {
            "systemEfficiency": 0.96
          },
          "dataIntegrity": {
            "verificationHash": "abc123..."
          }
        }
      }
    }
  },
  "esp32_data_structure": {
    "description": "ESP32 SCADA data structure from AggregatedEnergyReport",
    "fields": {
      "energy_metrics": {
        "total_energy_kwh": "Total energy production in kilowatt-hours",
        "avg_power_w": "Average power output in watts",
        "max_power_w": "Peak power output in watts",
        "capacity_factor": "Ratio of actual to theoretical maximum energy output"
      },
      "performance_metrics": {
        "avg_efficiency": "Average system efficiency (0.0 to 1.0)",
        "avg_power_factor": "Average power factor",
        "avg_grid_frequency": "Average grid frequency in Hz"
      },
      "environmental_metrics": {
        "avg_irradiance_w_m2": "Average solar irradiance in W/m\u00b2",
        "avg_temperature_c": "Average ambient temperature in Celsius"
      },
      "data_quality": {
        "verification_hash": "Cryptographic hash for data integrity",
        "data_integrity_score": "Overall data quality score (0.0 to 1.0)",
        "total_readings": "Number of sensor readings in period"
      }
    },
    "units": {
      "total_energy_kwh": "kWh",
      "avg_power_w": "W",
      "max_power_w": "W",
      "avg_efficiency": "decimal (0.0-1.0)",
      "avg_irradiance_w_m2": "W/m\u00b2",
      "avg_temperature_c": "\u00b0C",
      "avg_grid_frequency": "Hz",
      "avg_power_factor": "decimal (0.0-1.0)"
    },
    "data_quality_metrics": {
      "total_readings": "Total number of sensor readings collected",
      "valid_readings": "Number of readings that passed validation",
      "data_completeness_percent": "Percentage of expected readings received",
      "verification_hash": "SHA-256 hash of key data points for integrity verification",
      "data_integrity_score": "Composite score (0.0-1.0) based on completeness, validity, and consistency"
    }
  },
  "guardian_schema_structure": {
    "verifiable_credential": {
      "@context": "JSON-LD context defining vocabulary and semantics",
      "type": "Array of credential types including VerifiableCredential",
      "issuer": "DID of the credential issuer (ESP32 device)",
      "issuanceDate": "ISO 8601 timestamp of credential creation",
      "credentialSubject": "Main data payload with energy production information",
      "proof": "Cryptographic proof for credential integrity"
    },
    "verra_compliance": {
      "methodology": "Verra methodology identifier (VM0042, ARR, etc.)",
      "version": "Schema version for compliance tracking",
      "project_type": "Type of renewable energy project",
      "baseline_scenario": "Baseline scenario for carbon credit calculation",
      "geographic_location": "Location-specific parameters including grid emission factors"
    },
    "proof_mechanism": {
      "type": "Type of proof mechanism (DataIntegrityProof)",
      "created": "Timestamp when proof was generated",
      "verificationMethod": "DID and key reference for proof verification",
      "proofValue": "Cryptographic signature or hash value",
      "challenge": "Unique challenge value to prevent replay attacks"
    }
  },
  "transformation_examples": {
    "basic_energy_data": {
      "description": "Basic energy production data transformation",
      "esp32_input": {
        "total_energy_kwh": 150.75,
        "avg_power_w": 6281.25,
        "max_power_w": 8500.0
      },
      "guardian_output": {
        "energyProduction": {
          "totalEnergyKWh": 150.75,
          "averagePowerW": 6281.25,
          "peakPowerW": 8500.0
        }
      }
    },
    "environmental_data": {
      "description": "Environmental conditions data transformation",
      "esp32_input": {
        "avg_irradiance_w_m2": 850.5,
        "avg_temperature_c": 28.5,
        "max_temperature_c": 35.2
      },
      "guardian_output": {
        "environmental": {
          "solarIrradiance": 850.5,
          "ambientTemperature": 28.5,
          "location": {
            "country": "Morocco",
            "region": "MENA"
          }
        }
      }
    },
    "performance_metrics": {
      "description": "System performance metrics transformation",
      "esp32_input": {
        "avg_efficiency": 0.96,
        "capacity_factor": 0.85,
        "avg_power_factor": 0.95
      },
      "guardian_output": {
        "performance": {
          "systemEfficiency": 0.96,
          "capacityFactor": 0.85,
          "powerFactor": 0.95
        }
      }
    },
    "data_quality": {
      "description": "Data quality and integrity transformation",
      "esp32_input": {
        "verification_hash": "a1b2c3d4e5f6...",
        "data_integrity_score": 0.92,
        "total_readings": 1440
      },
      "guardian_output": {
        "dataIntegrity": {
          "verificationHash": "a1b2c3d4e5f6...",
          "qualityScore": 0.92,
          "measurementCount": 1440,
          "completenessPercent": 95.5
        }
      }
    }
  },
  "validation_guidelines": {
    "required_fields": {
      "VM0042": [
        "energyProduction.totalEnergyKWh",
        "energyProduction.averagePowerW",
        "dataIntegrity.verificationHash",
        "dataIntegrity.qualityScore"
      ],
      "ARR": [],
      "CUSTOM_RENEWABLE": [],
      "SOLAR_PV": [],
      "WIND": [],
      "GENERIC_RENEWABLE": []
    },
    "data_ranges": {
      "energy_production": {
        "totalEnergyKWh": {
          "min": 0,
          "max": 10000,
          "unit": "kWh"
        },
        "averagePowerW": {
          "min": 0,
          "max": 1000000,
          "unit": "W"
        }
      },
      "performance": {
        "systemEfficiency": {
          "min": 0,
          "max": 1,
          "unit": "decimal"
        },
        "capacityFactor": {
          "min": 0,
          "max": 1,
          "unit": "decimal"
        }
      },
      "environmental": {
        "solarIrradiance": {
          "min": 0,
          "max": 1500,
          "unit": "W/m\u00b2"
        },
        "ambientTemperature": {
          "min": -10,
          "max": 60,
          "unit": "\u00b0C"
        }
      }
    },
    "format_requirements": {
      "timestamps": "ISO 8601 format with timezone (e.g., 2024-01-15T10:30:00Z)",
      "numbers": "Decimal numbers with appropriate precision (e.g., 125.75)",
      "hashes": "Hexadecimal strings (SHA-256: 64 characters)",
      "device_ids": "Alphanumeric strings with underscores (e.g., ESP32_001)",
      "coordinates": "Decimal degrees (latitude: -90 to 90, longitude: -180 to 180)"
    },
    "compliance_checks": {
      "data_quality_threshold": "Minimum data integrity score of 0.7 required",
      "temporal_validity": "Valid period must be 24 hours or less for daily reports",
      "measurement_frequency": "Minimum 100 readings per day required",
      "energy_threshold": "Minimum 0.1 kWh energy production required",
      "verra_methodology": "Must align with specified Verra methodology requirements",
      "regional_compliance": "Must include Morocco grid standards (220V, 50Hz)"
    }
  }
}